//Set initial map view location
var map = L.map('mapid', {
  center: [49.427600, -123.107069],
  zoom: 11,
  zoomControl: false,
  fullscreenControl: true
})

L.control.scale({ 
  position: "bottomleft", imperial: false}).addTo(map);
L.control.zoom({ position: "bottomleft" }).addTo(map);

//Set up basemaps
var outdoors = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery &copy <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 13,
  minZoom: 10,
  id: 'mapbox/outdoors-v11',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1Ijoib2hlbnJ5dSIsImEiOiJja2d5ZmtrcXUwMmhzMndtcG9iemw5Z2RkIn0.FUtlIyXCOOjcTqdxWjjPzA'
}).addTo(map);

var sat_streets = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}', {
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery &copy <a href="https://www.mapbox.com/">Mapbox</a>',
  maxZoom: 13,
  minZoom: 10,
  id: 'mapbox/satellite-streets-v9',
  tileSize: 512,
  zoomOffset: -1,
  accessToken: 'pk.eyJ1Ijoib2hlbnJ5dSIsImEiOiJja2d5ZmtrcXUwMmhzMndtcG9iemw5Z2RkIn0.FUtlIyXCOOjcTqdxWjjPzA'
});

//Set up heatmaps
var heat_all=L.heatLayer([[49.3865,-122.9398],[49.3859,-123.21],[49.4004,-123.1829],[49.3726,-122.959],[49.3719,-123.0858],[49.3369,-122.9745],[49.3847,-122.945],[49.3919,-122.9439],[49.4064,-123.2132],[49.4107,-123.0929],[49.4005,-123.1829],[49.3679,-123.0812],[49.411,-123.208],[49.4277,-123.2076],[49.4105,-123.208],[49.372,-123.0858],[49.41,-123.2103],[49.3794,-123.0573],[49.3611,-123.0707],[49.3813,-123.0561],[49.4897,-123.233],[49.3789,-122.9501],[49.3634,-123.1595],[49.4081,-123.0294],[49.3728,-122.9612],[49.3715,-123.0877],[49.448,-123.1979],[49.4164,-123.0601],[49.3822,-123.0394],[49.3718,-122.9567],[49.3802,-122.9217],[49.3813,-123.24],[49.4301,-122.9277],[49.4758,-123.1998],[49.4971,-123.1968],[49.4095,-123.0915],[49.4065,-123.0904],[49.4141,-123.032],[49.3743,-122.9416],[49.4618,-123.1793],[49.4575,-123.1862],[49.3732,-122.97],[49.4141,-123.0678],[49.4135,-123.0317],[49.4085,-123.0918],[49.3967,-123.1821],[49.4411,-123.0219],[49.372,-123.0854],[49.4777,-123.2235],[49.4687,-123.2061],[49.4058,-123.0893],[49.4101,-123.091],[49.4577,-123.2045],[49.4245,-123.0035],[49.4163,-123.0622],[49.4276,-123.2065],[49.3726,-123.0908],[49.4047,-123.0991],[49.4194,-123.0432],[49.4473,-123.2136],[49.4435,-123.2278],[49.3903,-122.9435],[49.4575,-123.1862],[49.3726,-123.0832],[49.3722,-123.0931],[49.3704,-123.2552],[49.3725,-122.958],[49.4845,-123.1918],[49.4763,-123.2007],[49.3688,-122.9566],[49.3831,-123.2493],[49.4088,-123.2075],[49.3644,-123.0716],[49.3767,-123.2598],[49.3722,-123.0896],[49.3738,-122.9699],[49.4163,-123.2084],[49.4946,-123.2091],[49.4745,-123.2001],[49.4599,-123.2051],[49.373,-122.9637],[49.3962,-122.9412],[49.4059,-123.1938],[49.4102,-123.1889],[49.3656,-123.0852],[49.372,-123.0907],[49.3738,-122.9697],[49.4006,-122.9278],[49.387,-122.9382],[49.3783,-122.9486],[49.4159,-123.2064],[49.49,-123.2379],[49.3812,-123.2368],[49.3766,-123.3905],[49.334,-122.9845],[49.4583,-123.1948],[49.4571,-123.1868],[49.4899,-123.2373],[49.4596,-123.2154],[49.4299,-123.0013],[49.3435,-122.9984],[49.4868,-123.1985],[49.4151,-123.0307],[49.4569,-123.1891],[49.3748,-123.0869],[49.3805,-123.2364],[49.3757,-123.2607],[49.4466,-123.1974],[49.3851,-123.0179],[49.3719,-123.0864],[49.3732,-122.9631],[49.4113,-123.0297],[49.463,-123.1782],[49.3833,-123.2468],[49.4632,-123.1732],[49.4268,-123.2061],[49.3678,-122.9344],[49.4042,-123.0855],[49.5198,-123.2216],[49.4272,-122.9868],[49.4781,-123.19],[49.4059,-123.0835],[49.4241,-123.0013],[49.3727,-122.9556],[49.4436,-123.1961],[49.378,-122.9562],[49.3866,-123.2307],[49.4138,-123.0324],[49.3731,-122.9563],[49.3728,-122.9569],[49.3719,-123.0843],[49.3847,-123.084],[49.4351,-123.2063],[49.3848,-122.9379],[49.3927,-123.0342],[49.383,-123.2479],[49.4893,-123.2042],[49.3733,-123.0879],[49.3629,-123.0728],[49.4945,-123.2094],[49.3672,-123.028],[49.4477,-123.1979],[49.4865,-123.2016],[49.4182,-122.9359],[49.388,-123.2225],[49.4096,-123.0301],[49.3729,-122.9168],[49.4572,-123.1833],[49.419,-122.9373],[49.4184,-123.2074],[49.5273,-123.2046],[49.3815,-123.235],[49.4105,-123.2106],[49.4237,-123.206],[49.3914,-122.9434],[49.4584,-123.1855],[49.4091,-123.0919],[49.3742,-123.0906],[49.4595,-123.2072],[49.4251,-123.2067],[49.3769,-123.0875],[49.3973,-123.0021],[49.4045,-122.9188],[49.4474,-123.2117],[49.4001,-123.0289],[49.3924,-123.2188],[49.4122,-123.0744],[49.4322,-123.0055],[49.4329,-123.208],[49.4107,-122.9209],[49.4712,-123.1842],[49.3869,-123.2268],[49.3721,-122.955],[49.3669,-123.2408],[49.373,-122.9641],[49.3866,-122.9414],[49.4274,-123.2059],[49.3737,-122.9693],[49.4007,-122.9211],[49.4573,-123.2032],[49.3834,-123.246],[49.4009,-122.9432],[49.3754,-123.0903],[49.387,-122.9411],[49.3704,-123.0577],[49.4232,-123.206],[49.3327,-122.9906],[49.3966,-122.9314],[49.3952,-123.0769],[49.4114,-123.0769],[49.3691,-123.0315],[49.4718,-123.2178],[49.3925,-122.9459],[49.3808,-123.0569],[49.4126,-123.1959],[49.4249,-123.2061],[49.4246,-123.2059],[49.3671,-123.0608],[49.3716,-123.0873],[49.3784,-123.0573],[49.36,-123.185],[49.3736,-122.9689],[49.3832,-122.9527],[49.3571,-123.015],[49.3993,-123.1839],],{
  radius: 30,
  maxZoom: 15,
  minOpacity: 0.4,
  max: 1,
  blur: 15,
  gradient: {
    0: "#000000",
    0.2: "#570000",
    0.4: "blue",
    0.6: "lime",
    0.8: "#ffff00",
    1.0: "red",
  }
}).addTo(map)

var heat_2018=L.heatLayer([[49.3865,-122.9398],[49.3859,-123.21],[49.4004,-123.1829],[49.3726,-122.959],[49.3719,-123.0858],[49.3369,-122.9745],[49.3847,-122.945],[49.3919,-122.9439],[49.4064,-123.2132],[49.4107,-123.0929],[49.4005,-123.1829],[49.3679,-123.0812],[49.411,-123.208],[49.4277,-123.2076],[49.4105,-123.208],[49.372,-123.0858],[49.41,-123.2103],[49.3794,-123.0573],[49.3611,-123.0707],[49.3813,-123.0561],[49.4897,-123.233],[49.3789,-122.9501],[49.3634,-123.1595],[49.4081,-123.0294],[49.3728,-122.9612],[49.3715,-123.0877],[49.448,-123.1979],[49.4164,-123.0601],[49.3822,-123.0394],[49.3718,-122.9567],[49.3802,-122.9217],[49.3813,-123.24],[49.4301,-122.9277],[49.4758,-123.1998],[49.4971,-123.1968],[49.4095,-123.0915],[49.4065,-123.0904],[49.4141,-123.032],[49.3743,-122.9416],[49.4618,-123.1793],[49.4575,-123.1862],[49.3732,-122.97],[49.4141,-123.0678],[49.4135,-123.0317],[49.4085,-123.0918],[49.3967,-123.1821],[49.4411,-123.0219],[49.372,-123.0854],[49.4777,-123.2235],[49.4687,-123.2061],[49.4058,-123.0893],[49.4101,-123.091],[49.4577,-123.2045],[49.4245,-123.0035],[49.4163,-123.0622],[49.4276,-123.2065],[49.3726,-123.0908],[49.4047,-123.0991],[49.4194,-123.0432],[49.4473,-123.2136],[49.4435,-123.2278],[49.3903,-122.9435],[49.4575,-123.1862],[49.3726,-123.0832],[49.3722,-123.0931],[49.3704,-123.2552],[49.3725,-122.958],[49.4845,-123.1918],[49.4763,-123.2007],[49.3688,-122.9566],[49.3831,-123.2493],[49.4088,-123.2075],[49.3644,-123.0716],[49.3767,-123.2598],],{
  radius: 30,
  maxZoom: 14,
  minOpacity: 0.4,
  max: 1,
  blur: 15,
  gradient: {
    0: "#000000",
    0.2: "#570000",
    0.4: "blue",
    0.6: "lime",
    0.8: "#ffff00",
    1.0: "red",
  }
})

var heat_2019=L.heatLayer([[49.3722,-123.0896],[49.3738,-122.9699],[49.4163,-123.2084],[49.4946,-123.2091],[49.4745,-123.2001],[49.4599,-123.2051],[49.373,-122.9637],[49.3962,-122.9412],[49.4059,-123.1938],[49.4102,-123.1889],[49.3656,-123.0852],[49.372,-123.0907],[49.3738,-122.9697],[49.4006,-122.9278],[49.387,-122.9382],[49.3783,-122.9486],[49.4159,-123.2064],[49.49,-123.2379],[49.3812,-123.2368],[49.3766,-123.3905],[49.334,-122.9845],[49.4583,-123.1948],[49.4571,-123.1868],[49.4899,-123.2373],[49.4596,-123.2154],[49.4299,-123.0013],[49.3435,-122.9984],[49.4868,-123.1985],[49.4151,-123.0307],[49.4569,-123.1891],[49.3748,-123.0869],[49.3805,-123.2364],[49.3757,-123.2607],[49.4466,-123.1974],[49.3851,-123.0179],[49.3719,-123.0864],[49.3732,-122.9631],[49.4113,-123.0297],[49.463,-123.1782],[49.3833,-123.2468],[49.4632,-123.1732],[49.4268,-123.2061],[49.3678,-122.9344],[49.4042,-123.0855],[49.5198,-123.2216],[49.4272,-122.9868],[49.4781,-123.19],[49.4059,-123.0835],[49.4241,-123.0013],[49.3727,-122.9556],[49.4436,-123.1961],[49.378,-122.9562],[49.3866,-123.2307],[49.4138,-123.0324],],{
  radius: 30,
  maxZoom: 14,
  minOpacity: 0.4,
  max: 1,
  blur: 15,
  gradient: {
    0: "#000000",
    0.2: "#570000",
    0.4: "blue",
    0.6: "lime",
    0.8: "#ffff00",
    1.0: "red",
  }
})

var heat_2020=L.heatLayer([[49.3731,-122.9563],[49.3728,-122.9569],[49.3719,-123.0843],[49.3847,-123.084],[49.4351,-123.2063],[49.3848,-122.9379],[49.3927,-123.0342],[49.383,-123.2479],[49.4893,-123.2042],[49.3733,-123.0879],[49.3629,-123.0728],[49.4945,-123.2094],[49.3672,-123.028],[49.4477,-123.1979],[49.4865,-123.2016],[49.4182,-122.9359],[49.388,-123.2225],[49.4096,-123.0301],[49.3729,-122.9168],[49.4572,-123.1833],[49.419,-122.9373],[49.4184,-123.2074],[49.5273,-123.2046],[49.3815,-123.235],[49.4105,-123.2106],[49.4237,-123.206],[49.3914,-122.9434],[49.4584,-123.1855],[49.4091,-123.0919],[49.3742,-123.0906],[49.4595,-123.2072],[49.4251,-123.2067],[49.3769,-123.0875],[49.3973,-123.0021],[49.4045,-122.9188],[49.4474,-123.2117],[49.4001,-123.0289],[49.3924,-123.2188],[49.4122,-123.0744],[49.4322,-123.0055],[49.4329,-123.208],[49.4107,-122.9209],[49.4712,-123.1842],[49.3869,-123.2268],[49.3721,-122.955],[49.3669,-123.2408],[49.373,-122.9641],[49.3866,-122.9414],[49.4274,-123.2059],[49.3737,-122.9693],[49.4007,-122.9211],[49.4573,-123.2032],[49.3834,-123.246],[49.4009,-122.9432],[49.3754,-123.0903],[49.387,-122.9411],[49.3704,-123.0577],[49.4232,-123.206],[49.3327,-122.9906],[49.3966,-122.9314],[49.3952,-123.0769],[49.4114,-123.0769],[49.3691,-123.0315],[49.4718,-123.2178],[49.3925,-122.9459],[49.3808,-123.0569],[49.4126,-123.1959],[49.4249,-123.2061],[49.4246,-123.2059],[49.3671,-123.0608],[49.3716,-123.0873],[49.3784,-123.0573],[49.36,-123.185],[49.3736,-122.9689],[49.3832,-122.9527],[49.3571,-123.015],[49.3993,-123.1839],],{
  radius: 30,
  maxZoom: 14,
  minOpacity: 0.4,
  max: 1,
  blur: 15,
  gradient: {
    0: "#000000",
    0.2: "#570000",
    0.4: "blue",
    0.6: "lime",
    0.8: "#ffff00",
    1.0: "red",
  }
})

//Set layer objects
var basemaps = {
  "Terrain": outdoors,
  "Satellite": sat_streets
}

var heatmaps = {
  "Years": {
    "All": heat_all,
    "2018": heat_2018,
    "2019": heat_2019,
    "2020": heat_2020,
  }
}

var options = {
  exclusiveGroups: ["Years"],
  groupCheckboxes: true,
  collapsed: false
}

var control = L.control.groupedLayers(basemaps, heatmaps, options).addTo(map);
